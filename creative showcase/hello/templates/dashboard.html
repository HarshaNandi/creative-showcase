{% extends "base.html" %}

{% block content %}

<div class="container">

  <!-- ================= HEADER ================= -->
  <div style="
    background:#020617;
    padding:30px;
    border-radius:18px;
    margin-bottom:30px;
  ">
    <h2 style="color:#38bdf8;">
      Welcome {{ user.email }}
    </h2>

    <h3 style="margin-top:10px;">
      ðŸ”¥ Current Streak:
      <span style="color:#22c55e;">{{ streak }} days</span>
    </h3>
  </div>


  <!-- ================= UPLOAD ================= -->
  <div class="upload-box">
    <h3 style="margin-bottom:15px;">ðŸ“¤ Upload Image</h3>

    <form method="post" enctype="multipart/form-data" action="/upload/">
      {% csrf_token %}
      <input type="file" name="image" required>
      <button class="upload-btn" type="submit">Upload</button>
    </form>
  </div>


  <!-- ================= CALENDAR ================= -->
  <div style="
    background:#020617;
    padding:30px;
    border-radius:20px;
    margin-top:40px;
  ">

    <h2 style="margin-bottom:20px;">
      ðŸ“… {{ month_name }} {{ year }}
    </h2>

    <div style="
      display:grid;
      grid-template-columns:repeat(7,1fr);
      gap:12px;
      text-align:center;
    ">

      <!-- WEEKDAY HEADERS -->
      <div style="color:#38bdf8; font-weight:bold;">Mon</div>
      <div style="color:#38bdf8; font-weight:bold;">Tue</div>
      <div style="color:#38bdf8; font-weight:bold;">Wed</div>
      <div style="color:#38bdf8; font-weight:bold;">Thu</div>
      <div style="color:#38bdf8; font-weight:bold;">Fri</div>
      <div style="color:#38bdf8; font-weight:bold;">Sat</div>
      <div style="color:#38bdf8; font-weight:bold;">Sun</div>

      <!-- DAYS -->
      {% for week in month_calendar %}
        {% for day in week %}
          {% if day == 0 %}
            <div></div>
          {% else %}
            <div style="
              padding:14px;
              border-radius:14px;
              background:
                {% if day in active_days %}
                  #22c55e
                {% else %}
                  #1f2937
                {% endif %}
              ;
              color:white;
              font-weight:bold;
            ">
              {{ day }}
            </div>
          {% endif %}
        {% endfor %}
      {% endfor %}

    </div>
  </div>


  <!-- ================= USER UPLOADS ================= -->
  <div style="margin-top:50px;">
    <h2>Your Uploads</h2>

    <div class="gallery">
      {% for img in images %}
        <img src="{{ img.image.url }}">
      {% empty %}
        <p style="color:#9ca3af;">No uploads yet.</p>
      {% endfor %}
    </div>
  </div>

</div>

{% endblock %}
